# Skeleton configuration how-to
*Last updated: 08/02/2015*

## Basic infos

### Config files

We have multiple configuration files inside the skeleton. Some of the are stored in the `configs` directory (the other ones couldn't / shouldn't be moved).

- `configs/.scss-lint.yml`
	- Configuration for the SCSS linter, don't modify, if you really need to change it first consult with the others!
- `configs/karma-conf.js`
	- Configuration for the Karma JS unit tester, only modify if it's really needed!
- `config.rb`
	- Middleman configuration file	 
	- **It is generated**, not included in the repository (you have to generate it with `grunt init-middleman` command
	- **Don't modify it!** Modify the `skeleton-config.json` file and generate it again!
- `.jshintignore`
	- Configuration for the JS Hint, it sets which files should NOT be linted!
- `.jshintrc`
	- Configuration for the JS Hint
	- Don't move it, WebStorm looks for it in the root (_frontend) directory!
	- Only extend / modify, if you know what you do, don't switch of rules just to make your development easier!
	- Don't forget to add globally used namespaces (bottom part of the files, eg. `FB` for Facebook SDK)
- `Gemfile`
	- Config file for Bundler, don't modify!
- `Gruntfile.js`
	- Config, start point for Grunt
	- Don't modify, extra tasks should be added to the `tasks` directory and to the `skeleton-config.json`
- `package.json`
	- Config file for the Node modules
	- Dependencies are listed here
	- Only modify, if you add new / needed Node module to your project
- `skeleton-config.json`  
	- Main configuration file for the skeleton
	- Only modify the needed parts
	- Ask the others if you are not sure about some parts
	- `config.rb` is generated based on this file, also Bower config is generated from this file
	
### Directories

### `code-documentation` directory

Generated source code (only JS!) documentation in HTML format. It's generated with JSDoc.
Javascript codes should be commented using the JSDoc format!

### `configs` directory

Task, tool configuration files. Not all of the configurations could be moved here, some
of them needs to stay in the root directory (`_frontend`)

### `data` directory

Middleman's data folder. You find more info about it [here](http://middlemanapp.com/advanced/local-data/)
 
### `helpers` directory

Mostly batch files, helpers. They were created to help development. Mac version (.sh) coming soon!

### `ruby` directory

It has 2 subdirectories: `fixes` and `modules`.

The `fixes` directory contains an important file: `pathname.rb`. For more info about it see [How to install](how-to-install.md)  

There is another file in this directory: `AddTrustExternalCARoot-2048.pem`, it is a fix for the Ruby's SSL issue. Without this
file (until it won't get fixed in the next Ruby release) you're not able to install gems!    

Please follow the instructions here to fix your Ruby install: [Workaround RubyGems' SSL errors on Ruby for Windows](https://gist.github.com/luislavena/f064211759ee0f806c88)

The `modules` directory contains Ruby files / modules which are used by Middleman. Don't modify them!

### `skeleton-documentation` directory

Documentations, cheat-sheets for the skeleton.

### `source` directory

It holds every front-end related source file (e.g. Sass, Javascript, fonts, Middleman templates)

### `static` directory

The built, compiled `.html` files are stored here.

**Do not modify these files by hand,** because it's generated by the build process (these are compiled Middleman templates)

### `tasks` directory

Custom, complex Grunt tasks are stored here. Task options are defined here. Add new task into this directory.

### `tools` directory

Tools needed for the build process (e.g. Google Closure `compiler.jar`)

## Gemfile configuration / explanation

The Gemfile is used by the Bundler when installing gems.  
The structure of the file is very easy to understand.

**Example Gemfile**

```ruby
source 'https://rubygems.org'

gem 'sass', '~> 3.3.14'
gem 'bourbon', '~> 4.0'
gem 'middleman', '~> 3.3'
gem 'middleman-livereload', '~> 3.3.3'
gem 'rack-rewrite', '~> 1.5.0'
gem 'scss-lint', '~> 0.26.2'
gem 'hamlbars', '~> 2.1.1'
gem 'compass', '~> 1.0.0.rc.1'
gem 'wdm', '~> 0.1.0', :platforms => [:mswin, :mingw]
```

Each row starting with `gem` is a definition / dependency of a gem file. More info about the `Gemfile` could be found [here](http://bundler.io/v1.6/gemfile.html)

## .jshintrc configuration file

The skeleton uses [JSHint](http://www.jshint.com/) as a Javascript code quality tool.

It's integrated with Grunt and the build and development process (and also the WebStorm) uses this configuration file to
lint the Javascript files.

This file should only be edited if you want to add a new `global`. This can be done by adding a new key / value pair.

More info about adding globals to the JSHint config could be found [here](http://www.jshint.com/docs/)

## skeleton-config.json configuration file

This is the most important configuration file of the skeleton. This file is used to:
- generate the `config.rb` file (for Middleman)
- generate the `bower.json` file (for Bower)
- set proper project infos (eg. name, project URL, version control type, host etc.)

### Configuration break-down - parts

The JSON file has main keys, these are the basic modules. Every module has it's own sub-structure.

These modules keys are:

- `lastmodified`: when building the project this timestamp gets updated, don't modify by hand!
- `version`: when building this version number gets patched (the default setup only increases the minor version number)
- `projectInfos`: description of the project, should be filled and can be modified by hand
- `bower`: basic bower config
- `configs`: config files for Bower and Node.js, don't modify!
- `grunt`: Grunt related settings, task definitions, package dependencies (for loadNpm, not for download)
- `directories`: skeleton directory definitions, namings, paths
- `scripts`: javascript related definitions, project dependencies, bower dependencies, naming, mapping
- `middleman`: Middleman related settings, this will be used to generate `config.rb`
- `assets`: Asset related settings, still under development

#### Configuration - projectInfos

Later...

#### Configuration - grunt

Later...

#### Configuration - directories

Later...

#### Configuration - scripts

Later...

#### Configuration - middleman

Later...
